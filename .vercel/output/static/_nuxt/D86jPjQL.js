import{_ as N}from"./uodTgukN.js";import{_ as F}from"./Cy9M1EP5.js";import{_ as H}from"./MQ5VgeEN.js";import{e as P,f as D,g as _,r as A,h as y,o as l,w as O,a as t,t as v,c as n,F as f,i as S,n as R,j as $,b as r,d as k,k as q,l as E,m as L,p as V,q as b,s as C,v as B}from"./B5yRquVf.js";import{u as T}from"./WyI-KTBH.js";import{u as j}from"./BqVBlQ-7.js";const z=["src","alt"],J={class:"p-4"},Q={class:"text-xl font-semibold text-gray-800 mb-2"},X={class:"text-gray-600 text-sm mb-2"},G={class:"flex items-center mb-2"},K={class:"flex text-yellow-500"},W={class:"ml-2 text-gray-700 text-sm"},Y={class:"text-gray-900 text-lg font-bold mb-4"},Z=P({__name:"HotelCard",props:{hotel:{}},setup(a){const i=a,u=T();D(()=>{u.loadComparisonFromLocalStorage()});const m=_(()=>u.isHotelInComparison(i.hotel.id)),o=()=>{m.value?u.removeHotelFromCompare(i.hotel.id):u.addHotelToCompare(i.hotel)};return(w,g)=>{const d=A("Icon"),h=H;return l(),y(h,{to:`/hotels/${a.hotel.id}`,class:"block bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300 overflow-hidden"},{default:O(()=>[t("img",{src:a.hotel.imageUrl,alt:a.hotel.name,class:"w-full h-48 object-cover"},null,8,z),t("div",J,[t("h3",Q,v(a.hotel.name),1),t("p",X,v(a.hotel.location),1),t("div",G,[t("div",K,[(l(),n(f,null,S(5,c=>(l(),n(f,{key:c},[c<=Math.floor(a.hotel.rating)?(l(),y(d,{key:0,name:"ic:round-star"})):c-.5===a.hotel.rating?(l(),y(d,{key:1,name:"ic:round-star-half",class:"h-5 w-5"})):(l(),y(d,{key:2,name:"ic:round-star-border",class:"h-5 w-5"}))],64))),64))]),t("span",W,v(a.hotel.rating?.toFixed(1)||"N/A")+" ("+v(a.hotel.reviewsCount)+" avaliações)",1)]),t("p",Y,"R$ "+v(a.hotel.pricePerNight?.toFixed(2)||"0.00")+" / noite",1),t("button",{onClick:$(o,["prevent"]),class:R(["w-full px-4 py-2 rounded-md text-sm font-medium transition-colors duration-200",m.value?"bg-red-500 text-white hover:bg-red-600":"bg-indigo-600 text-white hover:bg-indigo-700"])},[m.value?(l(),n(f,{key:0},[r(d,{name:"ic:round-check",class:"inline-block align-middle mr-1"}),g[0]||(g[0]=k(" Na Comparação ",-1))],64)):(l(),n(f,{key:1},[r(d,{name:"ic:round-add",class:"inline-block align-middle mr-1"}),g[1]||(g[1]=k(" Adicionar à Comparação ",-1))],64))],2)])]),_:1},8,["to"])}}}),ee=Object.assign(Z,{__name:"HotelCard"}),te={class:"p-4"},oe={key:0,class:"text-lg text-gray-700 mb-8"},se={class:"font-semibold"},le={key:1,class:"text-lg text-gray-700 mb-8"},ae={class:"bg-white p-6 rounded-lg shadow-md mb-8"},ne={class:"md:col-span-2"},re={class:"md:col-span-1"},ie={class:"md:col-span-3 mt-4"},de={class:"md:col-span-3 mt-4"},ue={class:"md:col-span-2 hidden"},me={class:"md:col-span-2 hidden"},ce={class:"md:col-span-2 hidden"},pe={key:2,class:"text-center text-lg text-gray-600"},ve={key:3,class:"text-center text-red-600 text-lg"},ge={key:4,class:"text-center text-gray-600 text-lg"},he={key:5,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},we=P({__name:"index",async setup(a){let i,u;const m=q(),o=E({location:"",minPrice:null,maxPrice:null,minRating:null,sortBy:"",sortOrder:"asc",checkInDate:"",checkOutDate:"",guests:1}),{data:w,pending:g,error:d,refresh:h}=([i,u]=L(()=>j("/api/hotels",{query:_(()=>({location:o.value.location||void 0,minPrice:o.value.minPrice||void 0,maxPrice:o.value.maxPrice||void 0,minRating:o.value.minRating||void 0,sortBy:o.value.sortBy||void 0,sortOrder:o.value.sortBy?o.value.sortOrder:void 0})),transform:x=>x.hotels},"$77hSeXQoip")),i=await i,u(),i),c=_(()=>w.value||[]),U=()=>{h()};return D(()=>{m.initializeAuth();const x=new Date,e=new Date(x);e.setDate(e.getDate()+1),o.value.checkInDate=x.toISOString().split("T")[0],o.value.checkOutDate=e.toISOString().split("T")[0]}),V(()=>o.value.sortBy,()=>{o.value.sortBy&&h()}),V(()=>o.value.sortOrder,()=>{h()}),(x,e)=>{const p=N,M=F,I=ee;return l(),n("div",te,[e[17]||(e[17]=t("h1",{class:"text-4xl font-bold text-gray-800 mb-6"}," Encontre o hotel perfeito! ",-1)),b(m).isAuthenticated?(l(),n("p",oe,[e[9]||(e[9]=k(" Bem-vindo de volta, ",-1)),t("span",se,v(b(m).currentUser?.name||"Usuário"),1),e[10]||(e[10]=k("! Vamos encontrar sua próxima estadia? ",-1))])):(l(),n("p",le," Faça login ou cadastre-se para aproveitar todas as nossas funcionalidades de reserva! ")),t("div",ae,[e[16]||(e[16]=t("h2",{class:"text-2xl font-semibold text-gray-900 mb-4"}," Buscar e Filtrar Hotéis ",-1)),t("form",{onSubmit:$(U,["prevent"]),class:"grid grid-cols-1 md:grid-cols-6 gap-4 items-end"},[t("div",ne,[r(p,{id:"location-search",modelValue:o.value.location,"onUpdate:modelValue":e[0]||(e[0]=s=>o.value.location=s),label:"Localização",placeholder:"Ex: Rio de Janeiro, São Paulo...",type:"text"},null,8,["modelValue"])]),t("div",null,[r(p,{id:"min-price",modelValue:o.value.minPrice,"onUpdate:modelValue":e[1]||(e[1]=s=>o.value.minPrice=s),modelModifiers:{number:!0},label:"Preço Mín.",type:"number",min:"0",step:"10"},null,8,["modelValue"])]),t("div",null,[r(p,{id:"max-price",modelValue:o.value.maxPrice,"onUpdate:modelValue":e[2]||(e[2]=s=>o.value.maxPrice=s),modelModifiers:{number:!0},label:"Preço Máx.",type:"number",min:"0",step:"10"},null,8,["modelValue"])]),t("div",null,[r(p,{id:"min-rating",modelValue:o.value.minRating,"onUpdate:modelValue":e[3]||(e[3]=s=>o.value.minRating=s),modelModifiers:{number:!0},label:"Avaliação Mín.",type:"number",min:"1",max:"5",step:"0.1"},null,8,["modelValue"])]),t("div",re,[r(M,{type:"submit",variant:"primary",class:"w-full"},{default:O(()=>[...e[11]||(e[11]=[k(" Buscar ",-1)])]),_:1})]),t("div",ie,[e[13]||(e[13]=t("label",{for:"sort-by",class:"block text-sm font-medium text-gray-700 mb-1"},"Ordenar por",-1)),C(t("select",{id:"sort-by","onUpdate:modelValue":e[4]||(e[4]=s=>o.value.sortBy=s),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"},[...e[12]||(e[12]=[t("option",{value:""},"Nenhum",-1),t("option",{value:"pricePerNight"},"Preço",-1),t("option",{value:"rating"},"Avaliação",-1)])],512),[[B,o.value.sortBy]])]),t("div",de,[e[15]||(e[15]=t("label",{for:"sort-order",class:"block text-sm font-medium text-gray-700 mb-1"},"Ordem",-1)),C(t("select",{id:"sort-order","onUpdate:modelValue":e[5]||(e[5]=s=>o.value.sortOrder=s),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"},[...e[14]||(e[14]=[t("option",{value:"asc"},"Crescente",-1),t("option",{value:"desc"},"Decrescente",-1)])],512),[[B,o.value.sortOrder]])]),t("div",ue,[r(p,{id:"check-in-date",modelValue:o.value.checkInDate,"onUpdate:modelValue":e[6]||(e[6]=s=>o.value.checkInDate=s),label:"Check-in",type:"date"},null,8,["modelValue"])]),t("div",me,[r(p,{id:"check-out-date",modelValue:o.value.checkOutDate,"onUpdate:modelValue":e[7]||(e[7]=s=>o.value.checkOutDate=s),label:"Check-out",type:"date"},null,8,["modelValue"])]),t("div",ce,[r(p,{id:"guests",modelValue:o.value.guests,"onUpdate:modelValue":e[8]||(e[8]=s=>o.value.guests=s),modelModifiers:{number:!0},label:"Hóspedes",type:"number",min:"1"},null,8,["modelValue"])])],32)]),b(g)?(l(),n("div",pe," Carregando hotéis... ")):b(d)?(l(),n("div",ve," Erro ao carregar hotéis: "+v(b(d).message||"Verifique sua conexão."),1)):!c.value||c.value.length===0?(l(),n("div",ge," Nenhum hotel encontrado para sua pesquisa. ")):(l(),n("div",he,[(l(!0),n(f,null,S(c.value,s=>(l(),y(I,{key:s.id,hotel:s},null,8,["hotel"]))),128))]))])}}});export{we as default};
